!function(e){e.fn.waitMe=function(t){return this.each(function(){var i,o,a,r,s,n,c=e(this),d="waitMe",l=!1,f="background-color",u="",m="",h={init:function(){switch(s=e.extend({effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"",source:"",onClose:function(){}},t),n=(new Date).getMilliseconds(),r=e('<div class="'+d+'" data-waitme_id="'+n+'"></div>'),s.effect){case"none":a=0;break;case"bounce":a=3;break;case"rotateplane":a=1;break;case"stretch":a=5;break;case"orbit":a=2,l=!0;break;case"roundBounce":a=12;break;case"win8":case"win8_linear":a=5,l=!0;break;case"ios":a=12;break;case"facebook":a=3;break;case"rotation":a=1,f="border-color";break;case"timer":if(a=2,e.isArray(s.color))var h=s.color[0];else h=s.color;u="border-color:"+h;break;case"pulse":a=1,f="border-color";break;case"progressBar":a=1;break;case"bouncePulse":a=3;break;case"img":a=1}if(""!==u&&(u+=";"),a>0){if("img"===s.effect)m='<img style="width:50px;height:50px;opacity:.6" src="'+s.source+'">';else for(var b=1;b<=a;++b){if(e.isArray(s.color))null==(h=s.color[b])&&(h="#000");else h=s.color;m+=l?'<div class="'+d+"_progress_elem"+b+'"><div style="'+f+":"+h+'"></div></div>':'<div class="'+d+"_progress_elem"+b+'" style="'+f+":"+h+'"></div>'}o=e('<div class="'+d+"_progress "+s.effect+'" style="'+u+'">'+m+"</div>")}if(s.text){if(e.isArray(s.color))h=s.color[0];else h=s.color;if(""!=s.fontSize)var p="font-size:"+s.fontSize;else p="";i=e('<div class="'+d+'_text" style="color:'+h+";"+p+'">'+s.text+"</div>")}var v=c.find("> ."+d);v&&v.remove();var g=e('<div class="'+d+"_content "+s.textPos+'"></div>');g.append(o,i),r.append(g),"HTML"==c[0].tagName&&(c=e("body")),c.addClass(d+"_container").attr("data-waitme_id",n).append(r),v=c.find("> ."+d);var x=c.find("."+d+"_content");if(v.css({background:s.bg}),""!==s.maxSize&&"none"!=s.effect){var y=o.outerHeight(),_=(o.outerWidth(),y);if("img"===s.effect)o.css({height:s.maxSize+"px"}),o.find(">img").css({maxHeight:"100%"}),x.css({marginTop:-x.outerHeight()/2+"px"});else if(s.maxSize<_)if("stretch"==s.effect)o.css({height:s.maxSize+"px",width:s.maxSize+"px"}),o.find("> div").css({margin:"0 5%"});else{var k=s.maxSize/_-.2,M="-50%";"roundBounce"==s.effect?(M="-75%",s.text&&(M="75%")):"win8"==s.effect||"timer"==s.effect||"orbit"==s.effect?(M="-20%",s.text&&(M="20%")):"ios"==s.effect&&(M="-15%",s.text&&(M="15%")),"rotation"==s.effect&&s.text&&(M="75%"),o.css({transform:"scale("+k+") translateX("+M+")",whiteSpace:"nowrap"})}}function z(e){x.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}if(x.css({marginTop:-x.outerHeight()/2+"px"}),c.outerHeight()>e(window).height()){var S=e(window).scrollTop(),T=x.outerHeight(),C=c.offset().top,H=c.outerHeight(),A=S-C+e(window).height()/2;A<0&&(A=Math.abs(A)),A-T>=0&&A+T<=H?(C-S>e(window).height()/2&&(A=T),z(A)):z(A=S>C+H-T?S-C-T:S-C+T),e(document).scroll(function(){var t=e(window).scrollTop()-C+e(window).height()/2;t-T>=0&&t+T<=H&&z(t)})}return s.waitTime>0&&setTimeout(function(){w()},s.waitTime),v.on("destroyed",function(){s.onClose&&e.isFunction(s.onClose)&&s.onClose(c),v.trigger("close",{el:c})}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},v},hide:function(){w()}};function w(){var e=c.attr("data-waitme_id");c.removeClass(d+"_container").removeAttr("data-waitme_id"),c.find("."+d+'[data-waitme_id="'+e+'"]').remove()}return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:h.init.apply(this,arguments)})},e(window).on("load",function(){e("body.waitMe_body").addClass("hideMe"),setTimeout(function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})}(jQuery);